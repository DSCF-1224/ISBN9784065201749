<?xml version="1.0" encoding="utf-8"  standalone="no"?>
<svg  onload="if (typeof(gnuplot_svg)!='undefined') gnuplot_svg.Init(evt)" 
 width="800" height="450"
 viewBox="0 0 800 450"
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
>

<title>Gnuplot</title>
<desc>Produced by GNUPLOT 5.4 patchlevel 2 </desc>

<script type="text/javascript" > <![CDATA[
// From:	Marko Karjalainen <markokarjalainen@kolumbus.fi>
// Date:	27 Aug 2018
// Experimental gnuplot plugin for svg
//
// All svg elements on page get own gnuplot plugin attached by js, so no conflict with global variables.
//
// Javascript variables are read from second script tag and converted to json for import to plugin.
// Inline events are removed from xml and new ones are attached with addEventListener function.
// Inline events should be removed from xml and xml should have better id/class names to attach events from js.
//
// Improved mouseover text and image handling
//   content changed to xml only if it really changed and bouncing is calculated once.
//
// Convert functions are same as before, maybe renamed better.
//
// Javascript routines for mouse and keyboard interaction with
// SVG documents produced by gnuplot SVG terminal driver.

// TODO do not create inline events to svg and give id or classes for getting elements
// TODO make own svg layer x/y range sized for coordinates?

if (window) {
    window.addEventListener('load', function () {
        // Find svg elements
        var svg = document.querySelectorAll('svg');
        for (var i = 0; i < svg.length; i++) {
            // Init plugin
            if (!svg[i].gnuplot) {
                // Check if gnuplot generated svg
                if(svg[i].getElementById('gnuplot_canvas')){
                    svg[i].gnuplot = new gnuplot_svg(svg[i]);
                }
            }
        }
    });
}

gnuplot_svg = function (svgElement) {

    var version = '09 April 2019';

    var settings = {};

    var viewBoxResetValue = [];

    var drag = {
        'enabled': false,
        'offset': { 'x': 0, 'y': 0 },
        'change': svgElement.createSVGPoint(),
        'timeout': null
    };

    var coordinateText = {
        'enabled': false,
        'element': svgElement.getElementById('coord_text')
    };

    var popoverContainer = {
        'element': null,
        'content': null,
    };

    var popoverImage = {
        'element': null,
        'content': null,
        'width': 300,
        'height': 200,
        'defaultWidth': 300,
        'defaultHeight': 200,
    };

    var popoverText = {
        'element': null,
        'content': null,
        'width': 11,
        'height': 16,
        'defaultWidth': 11,
        'defaultHeight': 16,
    };

    var point = svgElement.createSVGPoint();

    var axisDate = new Date();

    var gridEnabled = false;

    // Get plot boundaries and axis scaling information for mousing from current object script tag
    // TODO add these to svg xml custom attribute for reading(json format)
    var parseSettings = function () {
        var script = svgElement.querySelectorAll('script');
        if (script && script[1]) {
            var scriptText = script[1].firstChild.nodeValue;
            // Remove inline comments
            scriptText = scriptText.replace(/^\s*\/\/.*\n/g, '');
            // Change prefix to "
            scriptText = scriptText.replace(/gnuplot_svg\./g, '"');
            // Change = to " :
            scriptText = scriptText.replace(/ = /g, '" : ');
            // Change line endings to comma
            scriptText = scriptText.replace(/;\n|\n/g, ',');
            // Remove last comma
            scriptText = scriptText.replace(/,+$/, '');
            // Parse as json string
            settings = JSON.parse("{\n" + scriptText + "\n}");
        }
    };

    // Add interactive events
    var addEvents = function () {
        var i;

        // Get keyentry elements
        var toggleVisibility = svgElement.querySelectorAll('g[id$="_keyentry"]');
        for (i = 0; i < toggleVisibility.length; i++) {
            // ------- Remove inline events
            toggleVisibility[i].removeAttribute('onclick');
            // -------

            // Add keyentry event to toggle visibility
            toggleVisibility[i].addEventListener('click', key.bind(null, toggleVisibility[i].getAttribute('id'), null));
        }

        // ------- Remove inline events from bounding box
        var boundingBox = svgElement.querySelector('rect[onclick^="gnuplot_svg.toggleCoordBox"]');
        if (boundingBox) {
            boundingBox.removeAttribute('onclick');
            boundingBox.removeAttribute('onmousemove');
        }
        // ------- Remove inline events from canvas
        var canvas = svgElement.getElementById('gnuplot_canvas');
        if (canvas) {
            canvas.removeAttribute('onclick');
            canvas.removeAttribute('onmousemove');
        }
        // -------

        // Get grid image
        var toggleGrid = svgElement.querySelector('image[onclick^="gnuplot_svg.toggleGrid"]');
        if (toggleGrid) {
            // ------- Remove inline events
            toggleGrid.removeAttribute('onclick');
            // -------

            // Add Toggle grid image event
            toggleGrid.addEventListener('click', function (evt) {
                grid();
                evt.preventDefault();
                evt.stopPropagation();
            });
        }

        // Get hypertexts
        var hyperText = svgElement.querySelectorAll('g[onmousemove^="gnuplot_svg.showHypertext"]');

        // Set view element variables
        if (hyperText.length) {
            popoverContainer.element = svgElement.getElementById('hypertextbox');
            popoverText.element = svgElement.getElementById('hypertext');
            popoverImage.element = svgElement.getElementById('hyperimage');
            popoverImage.defaultWidth = popoverImage.element.getAttribute('width');
            popoverImage.defaultHeight = popoverImage.element.getAttribute('height');
        }

        for (i = 0; i < hyperText.length; i++) {
            // Get text from attr uggly way, svg has empty title element
            var text = hyperText[i].getAttribute('onmousemove').substr(31).slice(0, -2);

            // ------- Remove inline events
            hyperText[i].removeAttribute('onmousemove');
            hyperText[i].removeAttribute('onmouseout');
            // -------

            // Add event
            hyperText[i].addEventListener('mousemove', popover.bind(null, text, true));
            hyperText[i].addEventListener('mouseout', popover.bind(null, null, false));
        }

        // Toggle coordinates visibility on left click on boundingBox element
        svgElement.addEventListener('click', function (evt) {
            if (!drag.enabled) {
                // TODO check if inside data area, own layer for this is needed?
                coordinate();
                setCoordinateLabel(evt);
            }
        });

        // Save move start position, enable drag after delay
        svgElement.addEventListener('mousedown', function (evt) {

            drag.offset = { 'x': evt.clientX, 'y': evt.clientY };

            // Delay for moving, so not move accidentally if only click
            drag.timeout = setTimeout(function () {
                drag.enabled = true;
            }, 250);

            // Cancel draggable
            evt.stopPropagation();
            evt.preventDefault();
            return false;
        });

        // Disable drag
        svgElement.addEventListener('mouseup', function (evt) {
            drag.enabled = false;
            clearTimeout(drag.timeout);
        });

        // Mouse move
        svgElement.addEventListener('mousemove', function (evt) {

            // Drag svg element
            if (evt.buttons == 1 && drag.enabled) {

                // Position change
                drag.change.x = evt.clientX - drag.offset.x;
                drag.change.y = evt.clientY - drag.offset.y;

                // Set current mouse position
                drag.offset.x = evt.clientX;
                drag.offset.y = evt.clientY;

                // Convert to svg position
                drag.change.matrixTransform(svgElement.getScreenCTM().inverse());

                var viewBoxValues = getViewBox();

                viewBoxValues[0] -= drag.change.x;
                viewBoxValues[1] -= drag.change.y;

                setViewBox(viewBoxValues);
            }

            // View coordinates on mousemove over svg element
            if (coordinateText.enabled) {
                // TODO check if inside data area, own layer for this is needed?
                setCoordinateLabel(evt);
            }

        });

        // Zoom with wheel
        svgElement.addEventListener('wheel', function (evt) {
            // x or y scroll zoom both axels
            var delta = Math.max(-1, Math.min(1, (evt.deltaY || evt.deltaX)));

            if (delta > 0) {
                setViewBox(zoom('in'));
            }
            else {
                setViewBox(zoom('out'));
            }

            // Disable scroll the entire webpage
            evt.stopPropagation();
            evt.preventDefault();
            return false;
        });

        // Reset on right click or hold tap
        svgElement.addEventListener('contextmenu', function (evt) {

            setViewBox(viewBoxResetValue);

            // Disable native context menu
            evt.stopPropagation();
            evt.preventDefault();
            return false;
        });

        // Keyboard actions, old svg version not support key events so must listen window
        window.addEventListener('keydown', function (evt) {

            // Not capture event from inputs
            // body = svg inline in page, svg = plain svg file, window = delegated events to object
            if (evt.target.nodeName != 'BODY' && evt.target.nodeName != 'svg' && evt.target != window) {
                return true;
            }

            var viewBoxValues = [];

            switch (evt.key) {
                // Move, Edge sends without Arrow word
                case 'ArrowLeft':
                case 'Left':
                case 'ArrowRight':
                case 'Right':
                case 'ArrowUp':
                case 'Up':
                case 'ArrowDown':
                case 'Down':
                    viewBoxValues = pan(evt.key.replace('Arrow', '').toLowerCase());
                    break;
                // Zoom in
                case '+':
                case 'Add':
                    viewBoxValues = zoom('in');
                    break;
                // Zoom out
                case '-':
                case 'Subtract':
                    viewBoxValues = zoom('out');
                    break;
                // Reset
                case 'Home':
                    viewBoxValues = viewBoxResetValue;
                    break;
                // Toggle grid
                case '#':
                    grid();
                    break;
            }

            if (viewBoxValues.length) {
                setViewBox(viewBoxValues);
            }
        });
    };

    // Get svg viewbox details
    var getViewBox = function () {
        var viewBoxValues = svgElement.getAttribute('viewBox').split(' ');
        viewBoxValues[0] = parseFloat(viewBoxValues[0]);
        viewBoxValues[1] = parseFloat(viewBoxValues[1]);
        viewBoxValues[2] = parseFloat(viewBoxValues[2]);
        viewBoxValues[3] = parseFloat(viewBoxValues[3]);
        return viewBoxValues;
    };

    // Set svg viewbox details
    var setViewBox = function (viewBoxValues) {
        svgElement.setAttribute('viewBox', viewBoxValues.join(' '));
    };

    // Set coordinate label position and text
    var setCoordinateLabel = function (evt) {
        var position = convertDOMToSVG({ 'x': evt.clientX, 'y': evt.clientY });

        // Set coordinate label position
        coordinateText.element.setAttribute('x', position.x);
        coordinateText.element.setAttribute('y', position.y);

        // Convert svg position to plot coordinates
        var plotcoord = convertSVGToPlot(position);

        // Parse label to view
        var label = parseCoordinateLabel(plotcoord);

        // Set coordinate label text
        coordinateText.element.textContent = label.x + ' ' + label.y;
    };

    // Convert position DOM to SVG
    var convertDOMToSVG = function (position) {
        point.x = position.x;
        point.y = position.y;
        return point.matrixTransform(svgElement.getScreenCTM().inverse());
    };

    // Convert position SVG to Plot
    var convertSVGToPlot = function (position) {
        var plotcoord = {};
        var plotx = position.x - settings.plot_xmin;
        var ploty = position.y - settings.plot_ybot;
        var x, y;

        if (settings.plot_logaxis_x !== 0) {
            x = Math.log(settings.plot_axis_xmax)
                - Math.log(settings.plot_axis_xmin);
            x = x * (plotx / (settings.plot_xmax - settings.plot_xmin))
                + Math.log(settings.plot_axis_xmin);
            x = Math.exp(x);
        } else {
            x = settings.plot_axis_xmin + (plotx / (settings.plot_xmax - settings.plot_xmin)) * (settings.plot_axis_xmax - settings.plot_axis_xmin);
        }

        if (settings.plot_logaxis_y !== 0) {
            y = Math.log(settings.plot_axis_ymax)
                - Math.log(settings.plot_axis_ymin);
            y = y * (ploty / (settings.plot_ytop - settings.plot_ybot))
                + Math.log(settings.plot_axis_ymin);
            y = Math.exp(y);
        } else {
            y = settings.plot_axis_ymin + (ploty / (settings.plot_ytop - settings.plot_ybot)) * (settings.plot_axis_ymax - settings.plot_axis_ymin);
        }

        plotcoord.x = x;
        plotcoord.y = y;
        return plotcoord;
    };

    // Parse plot x/y values to label
    var parseCoordinateLabel = function (plotcoord) {
        var label = { 'x': 0, 'y': 0 };

        if (settings.plot_timeaxis_x == 'DMS' || settings.plot_timeaxis_y == 'DMS') {
            if (settings.plot_timeaxis_x == 'DMS') {
                label.x = convertToDMS(plotcoord.x);
            }
            else {
                label.x = plotcoord.x.toFixed(2);
            }

            if (settings.plot_timeaxis_y == 'DMS') {
                label.y = convertToDMS(plotcoord.y);
            }
            else {
                label.y = plotcoord.y.toFixed(2);
            }

        } else if (settings.polar_mode) {
            polar = convertToPolar(plotcoord.x, plotcoord.y);
            label.x = 'ang= ' + polar.ang.toPrecision(4);
            label.y = 'R= ' + polar.r.toPrecision(4);

        } else if (settings.plot_timeaxis_x == 'Date') {
            axisDate.setTime(1000 * plotcoord.x);
            var year = axisDate.getUTCFullYear();
            var month = axisDate.getUTCMonth();
            var date = axisDate.getUTCDate();
            label.x = (' ' + date).slice(-2) + '/' + ('0' + (month + 1)).slice(-2) + '/' + year;
            label.y = plotcoord.y.toFixed(2);
        } else if (settings.plot_timeaxis_x == 'Time') {
            axisDate.setTime(1000 * plotcoord.x);
            var hour = axisDate.getUTCHours();
            var minute = axisDate.getUTCMinutes();
            var second = axisDate.getUTCSeconds();
            label.x = ('0' + hour).slice(-2) + ':' + ('0' + minute).slice(-2) + ':' + ('0' + second).slice(-2);
            label.y = plotcoord.y.toFixed(2);
        } else if (settings.plot_timeaxis_x == 'DateTime') {
            axisDate.setTime(1000 * plotcoord.x);
            label.x = axisDate.toUTCString();
            label.y = plotcoord.y.toFixed(2);
        } else {
            label.x = plotcoord.x.toFixed(2);
            label.y = plotcoord.y.toFixed(2);
        }

        return label;
    };

    // Convert position to Polar
    var convertToPolar = function (x, y) {
        polar = {};
        var phi, r;
        phi = Math.atan2(y, x);
        if (settings.plot_logaxis_r) {
            r = Math.exp((x / Math.cos(phi) + Math.log(settings.plot_axis_rmin) / Math.LN10) * Math.LN10);
        }
        else if (settings.plot_axis_rmin > settings.plot_axis_rmax) {
            r = settings.plot_axis_rmin - x / Math.cos(phi);
        } else {
            r = settings.plot_axis_rmin + x / Math.cos(phi);
        }
        phi = phi * (180 / Math.PI);
        if (settings.polar_sense < 0) {
            phi = -phi;
        }
        if (settings.polar_theta0 !== undefined) {
            phi = phi + settings.polar_theta0;
        }
        if (phi > 180) { phi = phi - 360; }
        polar.r = r;
        polar.ang = phi;
        return polar;
    };

    // Convert position to DMS
    var convertToDMS = function (x) {
        var dms = { d: 0, m: 0, s: 0 };
        var deg = Math.abs(x);
        dms.d = Math.floor(deg);
        dms.m = Math.floor((deg - dms.d) * 60);
        dms.s = Math.floor((deg - dms.d) * 3600 - dms.m * 60);
        fmt = ((x < 0) ? '-' : ' ') + dms.d.toFixed(0) + 'Â°' + dms.m.toFixed(0) + '"' + dms.s.toFixed(0) + "'";
        return fmt;
    };

    // Set popover text to show
    var setPopoverText = function (content) {

        // Minimum length
        popoverText.width = popoverText.defaultWidth;

        // Remove old texts
        while (null !== popoverText.element.firstChild) {
            popoverText.element.removeChild(popoverText.element.firstChild);
        }

        var lines = content.split(/\n|\\n/g);

        // Single line
        if (lines.length <= 1) {
            popoverText.element.textContent = content;
            popoverText.width = popoverText.element.getComputedTextLength() + 8;
        }
        // Multiple lines
        else {
            var lineWidth = 0;
            var tspanElement;

            for (var l = 0; l < lines.length; l++) {
                tspanElement = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');
                // Y relative position
                if (l > 0) {
                    tspanElement.setAttribute('dy', popoverText.defaultHeight);
                }
                // Append text
                tspanElement.appendChild(document.createTextNode(lines[l]));
                popoverText.element.appendChild(tspanElement);

                // Max line width
                lineWidth = tspanElement.getComputedTextLength() + 8;
                if (popoverText.width < lineWidth) {
                    popoverText.width = lineWidth;
                }
            }
        }

        // Box Height
        popoverText.height = 2 + popoverText.defaultHeight * lines.length;
        popoverContainer.element.setAttribute('height', popoverText.height);

        // Box Width
        popoverContainer.element.setAttribute('width', popoverText.width);
    };

    // Set popover image to show
    var setPopoverImage = function (content) {

        // Set default image size
        popoverImage.width = popoverImage.defaultWidth;
        popoverImage.height = popoverImage.defaultHeight;

        // Pick up height and width from image(width,height):name
        if (content.charAt(5) == '(') {
            popoverImage.width = parseInt(content.slice(6));
            popoverImage.height = parseInt(content.slice(content.indexOf(',') + 1));
        }

        popoverImage.element.setAttribute('width', popoverImage.width);
        popoverImage.element.setAttribute('height', popoverImage.height);
        popoverImage.element.setAttribute('preserveAspectRatio', 'none');

        // attach image URL as a link
        content = content.slice(content.indexOf(':') + 1);
        popoverImage.element.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', content);
    };

    // Show popover text in given position
    var showPopoverText = function (position) {
        var domRect = svgElement.getBoundingClientRect();
        domRect = convertDOMToSVG({'x': domRect.right, 'y': domRect.bottom });

        // bounce off frame bottom
        if (position.y + popoverText.height + 16 > domRect.y) {
            position.y = domRect.y - popoverText.height - 16;
        }

        // bounce off right edge
        if (position.x + popoverText.width + 14 > domRect.x) {
            position.x = domRect.x - popoverText.width - 14;
        }

        // Change Box position
        popoverContainer.element.setAttribute('x', position.x + 10);
        popoverContainer.element.setAttribute('y', position.y + 4);
        popoverContainer.element.setAttribute('visibility', 'visible');

        // Change Text position
        popoverText.element.setAttribute('x', position.x + 14);
        popoverText.element.setAttribute('y', position.y + 18);
        popoverText.element.setAttribute('visibility', 'visible');

        // Change multiline text position
        var tspan = popoverText.element.querySelectorAll('tspan');
        for (var i = 0; i < tspan.length; i++) {
            tspan[i].setAttribute('x', position.x + 14);
        }

        // Font properties
        if (settings.hypertext_fontFamily != null)
            popoverText.element.setAttribute('font-family', settings.hypertext_fontFamily);
        if (settings.hypertext_fontStyle != null)
            popoverText.element.setAttribute('font-style', settings.hypertext_fontStyle);
        if (settings.hypertext_fontWeight != null)
            popoverText.element.setAttribute('font-weight', settings.hypertext_fontWeight);
        if (settings.hypertext_fontSize > 0)
            popoverText.element.setAttribute('font-size', settings.hypertext_fontSize);
    };

    // Show popover image in given position
    var showPopoverImage = function (position) {
        var domRect = svgElement.getBoundingClientRect();
        domRect = convertDOMToSVG({'x': domRect.right, 'y': domRect.bottom });

        // bounce off frame bottom
        if (position.y + popoverImage.height + 16 > domRect.y) {
            position.y = domRect.y - popoverImage.height - 16;
        }

        // bounce off right edge
        if (position.x + popoverImage.width + 14 > domRect.x) {
            position.x = domRect.x - popoverImage.width - 14;
        }

        popoverImage.element.setAttribute('x', position.x);
        popoverImage.element.setAttribute('y', position.y);
        popoverImage.element.setAttribute('visibility', 'visible');
    };

    // Hide all popovers
    var hidePopover = function () {
        popoverContainer.element.setAttribute('visibility', 'hidden');
        popoverText.element.setAttribute('visibility', 'hidden');
        popoverImage.element.setAttribute('visibility', 'hidden');
    };

    // Zoom svg inside viewbox
    var zoom = function (direction) {
        var zoomRate = 1.1;
        var viewBoxValues = getViewBox();

        var widthBefore = viewBoxValues[2];
        var heightBefore = viewBoxValues[3];

        if (direction == 'in') {
            viewBoxValues[2] /= zoomRate;
            viewBoxValues[3] /= zoomRate;
            // Pan to center
            viewBoxValues[0] -= (viewBoxValues[2] - widthBefore) / 2;
            viewBoxValues[1] -= (viewBoxValues[3] - heightBefore) / 2;
        }
        else if (direction == 'out') {
            viewBoxValues[2] *= zoomRate;
            viewBoxValues[3] *= zoomRate;
            // Pan to center
            viewBoxValues[0] += (widthBefore - viewBoxValues[2]) / 2;
            viewBoxValues[1] += (heightBefore - viewBoxValues[3]) / 2;
        }

        return viewBoxValues;
    };

    // Pan svg inside viewbox
    var pan = function (direction) {
        var panRate = 10;
        var viewBoxValues = getViewBox();

        switch (direction) {
            case 'left':
                viewBoxValues[0] += panRate;
                break;
            case 'right':
                viewBoxValues[0] -= panRate;
                break;
            case 'up':
                viewBoxValues[1] += panRate;
                break;
            case 'down':
                viewBoxValues[1] -= panRate;
                break;
        }

        return viewBoxValues;
    };

    // Toggle key and chart on/off or set manually to wanted
    var key = function (id, set, evt) {
        var visibility = null;

        // Chart element
        var chartElement = svgElement.getElementById(id.replace('_keyentry', ''));
        if (chartElement) {
            // Set on/off
            if (set === true || set === false) {
                visibility = set ? 'visible' : 'hidden';
            }
            // Toggle
            else {
                visibility = chartElement.getAttribute('visibility') == 'hidden' ? 'visible' : 'hidden';
            }
            chartElement.setAttribute('visibility', visibility);
        }

        // Key element
        var keyElement = svgElement.getElementById(id);
        if (keyElement && visibility) {
            keyElement.setAttribute('style', visibility == 'hidden' ? 'filter:url(#greybox)' : 'none');
        }

        if (evt !== undefined) {
            evt.stopPropagation();
            evt.preventDefault();
        }
    };

    // Toggle coordinates on/off or set manually to wanted
    var coordinate = function (set) {
        if (coordinateText.element) {
            // Set on/off
            if (set === true || set === false) {
                coordinateText.enabled = set;
            }
            // Toggle
            else {
                coordinateText.enabled = coordinateText.element.getAttribute('visibility') == 'hidden' ? true : false;
            }
            coordinateText.element.setAttribute('visibility', coordinateText.enabled ? 'visible' : 'hidden');
        }
    };

    // Toggle grid on/off or set manually to wanted
    var grid = function (set) {
        var grid = svgElement.getElementsByClassName('gridline');

        // Set on/off
        if (set === true || set === false) {
            gridEnabled = set;
        }
        // Toggle, get state from first element
        else if (grid.length) {
            gridEnabled = grid[0].getAttribute('visibility') == 'hidden' ? true : false;
        }

        for (i = 0; i < grid.length; i++) {
            grid[i].setAttribute('visibility', gridEnabled ? 'visible' : 'hidden');
        }
    };

    // Show popover text or image
    var popover = function (content, set, evt) {

        // Hide popover
        if (set === false) {
            hidePopover();

            if (evt !== undefined) {
                evt.stopPropagation();
                evt.preventDefault();
            }

            return;
        }

        var position = null;

        // Change content only if changed
        if (popoverContainer.content != content) {

            // Set current text
            popoverContainer.content = content;

            popoverImage.content = '';
            popoverText.content = content;

            // If text starts with image: process it as an xlinked bitmap
            if (content.substring(0, 5) == 'image') {
                var lines = content.split(/\n|\\n/g);
                var nameindex = lines[0].indexOf(':');
                if (nameindex > 0) {
                    popoverImage.content = lines.shift();
                    popoverText.content = '';

                    // Additional text lines
                    if (lines !== undefined && lines.length > 0) {
                        popoverText.content = lines.join('\n');
                    }
                }
            }

            // Set image content
            if(popoverImage.content){
                setPopoverImage(popoverImage.content);
            }

            // Set text content
            if(popoverText.content){
                setPopoverText(popoverText.content);
            }
        }

        if(popoverImage.content || popoverText.content){
            position = convertDOMToSVG({'x': evt.clientX, 'y': evt.clientY });
        }

        // Show popover image on mouse position
        if(popoverImage.content){
            showPopoverImage(position);
        }

        // Show popover on mouse position
        if(popoverText.content){
            showPopoverText(position);
        }

        if (evt !== undefined) {
            evt.stopPropagation();
            evt.preventDefault();
        }
    };

    // Parse plot settings
    parseSettings();

    // viewBox initial position and size
    viewBoxResetValue = getViewBox();

    // Set focusable for event focusing, not work on old svg version
    svgElement.setAttribute('focusable', true);

    // Disable native draggable
    svgElement.setAttribute('draggable', false);

    // Add events
    addEvents();

    // Return functions to outside use
    return {
        zoom: function (direction) {
            setViewBox(zoom(direction));
            return this;
        },
        pan: function (direction) {
            setViewBox(pan(direction));
            return this;
        },
        reset: function () {
            setViewBox(viewBoxResetValue);
            return this;
        },
        key: function (id, set) {
            key(id, set);
            return this;
        },
        coordinate: function (set) {
            coordinate(set);
            return this;
        },
        grid: function (set) {
            grid(set);
            return this;
        }
    };
};

// Old init function, remove when svg inline events removed
gnuplot_svg.Init = function() { };
]]>
</script>

<!-- Tie mousing to entire bounding box of the plot -->
<rect x="0" y="0" width="800" height="450" fill="#ffffff" stroke="black" stroke-width="1"
onclick="gnuplot_svg.toggleCoordBox(evt)"  onmousemove="gnuplot_svg.moveCoordBox(evt)"/>

<!-- Also track mouse when it is on a plot element -->
<g id="gnuplot_canvas" onclick="gnuplot_svg.toggleCoordBox(evt)" onmousemove="gnuplot_svg.moveCoordBox(evt)">

<defs>

	<circle id='gpDot' r='0.5' stroke-width='0.5' stroke='currentColor'/>
	<path id='gpPt0' stroke-width='0.222' stroke='currentColor' d='M-1,0 h2 M0,-1 v2'/>
	<path id='gpPt1' stroke-width='0.222' stroke='currentColor' d='M-1,-1 L1,1 M1,-1 L-1,1'/>
	<path id='gpPt2' stroke-width='0.222' stroke='currentColor' d='M-1,0 L1,0 M0,-1 L0,1 M-1,-1 L1,1 M-1,1 L1,-1'/>
	<rect id='gpPt3' stroke-width='0.222' stroke='currentColor' x='-1' y='-1' width='2' height='2'/>
	<rect id='gpPt4' stroke-width='0.222' stroke='currentColor' fill='currentColor' x='-1' y='-1' width='2' height='2'/>
	<circle id='gpPt5' stroke-width='0.222' stroke='currentColor' cx='0' cy='0' r='1'/>
	<use xlink:href='#gpPt5' id='gpPt6' fill='currentColor' stroke='none'/>
	<path id='gpPt7' stroke-width='0.222' stroke='currentColor' d='M0,-1.33 L-1.33,0.67 L1.33,0.67 z'/>
	<use xlink:href='#gpPt7' id='gpPt8' fill='currentColor' stroke='none'/>
	<use xlink:href='#gpPt7' id='gpPt9' stroke='currentColor' transform='rotate(180)'/>
	<use xlink:href='#gpPt9' id='gpPt10' fill='currentColor' stroke='none'/>
	<use xlink:href='#gpPt3' id='gpPt11' stroke='currentColor' transform='rotate(45)'/>
	<use xlink:href='#gpPt11' id='gpPt12' fill='currentColor' stroke='none'/>
	<path id='gpPt13' stroke-width='0.222' stroke='currentColor' d='M0,1.330 L1.265,0.411 L0.782,-1.067 L-0.782,-1.076 L-1.265,0.411 z'/>
	<use xlink:href='#gpPt13' id='gpPt14' fill='currentColor' stroke='none'/>
	<filter id='textbox' filterUnits='objectBoundingBox' x='0' y='0' height='1' width='1'>
	  <feFlood flood-color='white' flood-opacity='1' result='bgnd'/>
	  <feComposite in='SourceGraphic' in2='bgnd' operator='atop'/>
	</filter>
	<filter id='greybox' filterUnits='objectBoundingBox' x='0' y='0' height='1' width='1'>
	  <feFlood flood-color='lightgrey' flood-opacity='1' result='grey'/>
	  <feComposite in='SourceGraphic' in2='grey' operator='atop'/>
	</filter>
</defs>
<g fill="none" color="white" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,392.40 L73.14,392.40 M681.31,392.40 L672.31,392.40  '/>	<g transform="translate(55.75,396.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="end">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">0</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,377.85 L68.64,377.85 M681.31,377.85 L676.81,377.85 M64.14,369.34 L68.64,369.34 M681.31,369.34 L676.81,369.34
		M64.14,363.30 L68.64,363.30 M681.31,363.30 L676.81,363.30 M64.14,358.61 L68.64,358.61 M681.31,358.61 L676.81,358.61
		M64.14,354.78 L68.64,354.78 M681.31,354.78 L676.81,354.78 M64.14,351.55 L68.64,351.55 M681.31,351.55 L676.81,351.55
		M64.14,348.74 L68.64,348.74 M681.31,348.74 L676.81,348.74 M64.14,346.27 L68.64,346.27 M681.31,346.27 L676.81,346.27
		M64.14,344.06 L73.14,344.06 M681.31,344.06 L672.31,344.06  '/>	<g transform="translate(55.75,347.96)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="end">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">1</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,329.51 L68.64,329.51 M681.31,329.51 L676.81,329.51 M64.14,320.99 L68.64,320.99 M681.31,320.99 L676.81,320.99
		M64.14,314.95 L68.64,314.95 M681.31,314.95 L676.81,314.95 M64.14,310.27 L68.64,310.27 M681.31,310.27 L676.81,310.27
		M64.14,306.44 L68.64,306.44 M681.31,306.44 L676.81,306.44 M64.14,303.21 L68.64,303.21 M681.31,303.21 L676.81,303.21
		M64.14,300.40 L68.64,300.40 M681.31,300.40 L676.81,300.40 M64.14,297.93 L68.64,297.93 M681.31,297.93 L676.81,297.93
		M64.14,295.72 L73.14,295.72 M681.31,295.72 L672.31,295.72  '/>	<g transform="translate(55.75,299.62)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="end">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">2</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,281.16 L68.64,281.16 M681.31,281.16 L676.81,281.16 M64.14,272.65 L68.64,272.65 M681.31,272.65 L676.81,272.65
		M64.14,266.61 L68.64,266.61 M681.31,266.61 L676.81,266.61 M64.14,261.93 L68.64,261.93 M681.31,261.93 L676.81,261.93
		M64.14,258.10 L68.64,258.10 M681.31,258.10 L676.81,258.10 M64.14,254.86 L68.64,254.86 M681.31,254.86 L676.81,254.86
		M64.14,252.06 L68.64,252.06 M681.31,252.06 L676.81,252.06 M64.14,249.59 L68.64,249.59 M681.31,249.59 L676.81,249.59
		M64.14,247.38 L73.14,247.38 M681.31,247.38 L672.31,247.38  '/>	<g transform="translate(55.75,251.28)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="end">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">3</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,232.82 L68.64,232.82 M681.31,232.82 L676.81,232.82 M64.14,224.31 L68.64,224.31 M681.31,224.31 L676.81,224.31
		M64.14,218.27 L68.64,218.27 M681.31,218.27 L676.81,218.27 M64.14,213.59 L68.64,213.59 M681.31,213.59 L676.81,213.59
		M64.14,209.76 L68.64,209.76 M681.31,209.76 L676.81,209.76 M64.14,206.52 L68.64,206.52 M681.31,206.52 L676.81,206.52
		M64.14,203.72 L68.64,203.72 M681.31,203.72 L676.81,203.72 M64.14,201.25 L68.64,201.25 M681.31,201.25 L676.81,201.25
		M64.14,199.03 L73.14,199.03 M681.31,199.03 L672.31,199.03  '/>	<g transform="translate(55.75,202.93)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="end">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">4</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,184.48 L68.64,184.48 M681.31,184.48 L676.81,184.48 M64.14,175.97 L68.64,175.97 M681.31,175.97 L676.81,175.97
		M64.14,169.93 L68.64,169.93 M681.31,169.93 L676.81,169.93 M64.14,165.25 L68.64,165.25 M681.31,165.25 L676.81,165.25
		M64.14,161.42 L68.64,161.42 M681.31,161.42 L676.81,161.42 M64.14,158.18 L68.64,158.18 M681.31,158.18 L676.81,158.18
		M64.14,155.38 L68.64,155.38 M681.31,155.38 L676.81,155.38 M64.14,152.90 L68.64,152.90 M681.31,152.90 L676.81,152.90
		M64.14,150.69 L73.14,150.69 M681.31,150.69 L672.31,150.69  '/>	<g transform="translate(55.75,154.59)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="end">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">5</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,136.14 L68.64,136.14 M681.31,136.14 L676.81,136.14 M64.14,127.63 L68.64,127.63 M681.31,127.63 L676.81,127.63
		M64.14,121.59 L68.64,121.59 M681.31,121.59 L676.81,121.59 M64.14,116.90 L68.64,116.90 M681.31,116.90 L676.81,116.90
		M64.14,113.08 L68.64,113.08 M681.31,113.08 L676.81,113.08 M64.14,109.84 L68.64,109.84 M681.31,109.84 L676.81,109.84
		M64.14,107.04 L68.64,107.04 M681.31,107.04 L676.81,107.04 M64.14,104.56 L68.64,104.56 M681.31,104.56 L676.81,104.56
		M64.14,102.35 L73.14,102.35 M681.31,102.35 L672.31,102.35  '/>	<g transform="translate(55.75,106.25)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="end">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">6</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,87.80 L68.64,87.80 M681.31,87.80 L676.81,87.80 M64.14,79.29 L68.64,79.29 M681.31,79.29 L676.81,79.29
		M64.14,73.25 L68.64,73.25 M681.31,73.25 L676.81,73.25 M64.14,68.56 L68.64,68.56 M681.31,68.56 L676.81,68.56
		M64.14,64.73 L68.64,64.73 M681.31,64.73 L676.81,64.73 M64.14,61.50 L68.64,61.50 M681.31,61.50 L676.81,61.50
		M64.14,58.69 L68.64,58.69 M681.31,58.69 L676.81,58.69 M64.14,56.22 L68.64,56.22 M681.31,56.22 L676.81,56.22
		M64.14,54.01 L73.14,54.01 M681.31,54.01 L672.31,54.01  '/>	<g transform="translate(55.75,57.91)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="end">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">7</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,392.40 L64.14,383.40 M64.14,54.01 L64.14,63.01  '/>	<g transform="translate(64.14,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">-2</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M87.36,392.40 L87.36,387.90 M87.36,54.01 L87.36,58.51 M100.95,392.40 L100.95,387.90 M100.95,54.01 L100.95,58.51
		M110.59,392.40 L110.59,387.90 M110.59,54.01 L110.59,58.51 M118.06,392.40 L118.06,387.90 M118.06,54.01 L118.06,58.51
		M124.17,392.40 L124.17,387.90 M124.17,54.01 L124.17,58.51 M129.34,392.40 L129.34,387.90 M129.34,54.01 L129.34,58.51
		M133.81,392.40 L133.81,387.90 M133.81,54.01 L133.81,58.51 M137.76,392.40 L137.76,387.90 M137.76,54.01 L137.76,58.51
		M141.29,392.40 L141.29,383.40 M141.29,54.01 L141.29,63.01  '/>	<g transform="translate(141.29,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">-1</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M164.51,392.40 L164.51,387.90 M164.51,54.01 L164.51,58.51 M178.09,392.40 L178.09,387.90 M178.09,54.01 L178.09,58.51
		M187.73,392.40 L187.73,387.90 M187.73,54.01 L187.73,58.51 M195.21,392.40 L195.21,387.90 M195.21,54.01 L195.21,58.51
		M201.32,392.40 L201.32,387.90 M201.32,54.01 L201.32,58.51 M206.48,392.40 L206.48,387.90 M206.48,54.01 L206.48,58.51
		M210.96,392.40 L210.96,387.90 M210.96,54.01 L210.96,58.51 M214.90,392.40 L214.90,387.90 M214.90,54.01 L214.90,58.51
		M218.43,392.40 L218.43,383.40 M218.43,54.01 L218.43,63.01  '/>	<g transform="translate(218.43,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">0</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M241.66,392.40 L241.66,387.90 M241.66,54.01 L241.66,58.51 M255.24,392.40 L255.24,387.90 M255.24,54.01 L255.24,58.51
		M264.88,392.40 L264.88,387.90 M264.88,54.01 L264.88,58.51 M272.36,392.40 L272.36,387.90 M272.36,54.01 L272.36,58.51
		M278.46,392.40 L278.46,387.90 M278.46,54.01 L278.46,58.51 M283.63,392.40 L283.63,387.90 M283.63,54.01 L283.63,58.51
		M288.10,392.40 L288.10,387.90 M288.10,54.01 L288.10,58.51 M292.05,392.40 L292.05,387.90 M292.05,54.01 L292.05,58.51
		M295.58,392.40 L295.58,383.40 M295.58,54.01 L295.58,63.01  '/>	<g transform="translate(295.58,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">1</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M318.80,392.40 L318.80,387.90 M318.80,54.01 L318.80,58.51 M332.39,392.40 L332.39,387.90 M332.39,54.01 L332.39,58.51
		M342.03,392.40 L342.03,387.90 M342.03,54.01 L342.03,58.51 M349.50,392.40 L349.50,387.90 M349.50,54.01 L349.50,58.51
		M355.61,392.40 L355.61,387.90 M355.61,54.01 L355.61,58.51 M360.77,392.40 L360.77,387.90 M360.77,54.01 L360.77,58.51
		M365.25,392.40 L365.25,387.90 M365.25,54.01 L365.25,58.51 M369.19,392.40 L369.19,387.90 M369.19,54.01 L369.19,58.51
		M372.73,392.40 L372.73,383.40 M372.73,54.01 L372.73,63.01  '/>	<g transform="translate(372.73,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">2</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M395.95,392.40 L395.95,387.90 M395.95,54.01 L395.95,58.51 M409.53,392.40 L409.53,387.90 M409.53,54.01 L409.53,58.51
		M419.17,392.40 L419.17,387.90 M419.17,54.01 L419.17,58.51 M426.65,392.40 L426.65,387.90 M426.65,54.01 L426.65,58.51
		M432.76,392.40 L432.76,387.90 M432.76,54.01 L432.76,58.51 M437.92,392.40 L437.92,387.90 M437.92,54.01 L437.92,58.51
		M442.40,392.40 L442.40,387.90 M442.40,54.01 L442.40,58.51 M446.34,392.40 L446.34,387.90 M446.34,54.01 L446.34,58.51
		M449.87,392.40 L449.87,383.40 M449.87,54.01 L449.87,63.01  '/>	<g transform="translate(449.87,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">3</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M473.09,392.40 L473.09,387.90 M473.09,54.01 L473.09,58.51 M486.68,392.40 L486.68,387.90 M486.68,54.01 L486.68,58.51
		M496.32,392.40 L496.32,387.90 M496.32,54.01 L496.32,58.51 M503.79,392.40 L503.79,387.90 M503.79,54.01 L503.79,58.51
		M509.90,392.40 L509.90,387.90 M509.90,54.01 L509.90,58.51 M515.07,392.40 L515.07,387.90 M515.07,54.01 L515.07,58.51
		M519.54,392.40 L519.54,387.90 M519.54,54.01 L519.54,58.51 M523.49,392.40 L523.49,387.90 M523.49,54.01 L523.49,58.51
		M527.02,392.40 L527.02,383.40 M527.02,54.01 L527.02,63.01  '/>	<g transform="translate(527.02,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">4</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M550.24,392.40 L550.24,387.90 M550.24,54.01 L550.24,58.51 M563.83,392.40 L563.83,387.90 M563.83,54.01 L563.83,58.51
		M573.46,392.40 L573.46,387.90 M573.46,54.01 L573.46,58.51 M580.94,392.40 L580.94,387.90 M580.94,54.01 L580.94,58.51
		M587.05,392.40 L587.05,387.90 M587.05,54.01 L587.05,58.51 M592.21,392.40 L592.21,387.90 M592.21,54.01 L592.21,58.51
		M596.69,392.40 L596.69,387.90 M596.69,54.01 L596.69,58.51 M600.63,392.40 L600.63,387.90 M600.63,54.01 L600.63,58.51
		M604.16,392.40 L604.16,383.40 M604.16,54.01 L604.16,63.01  '/>	<g transform="translate(604.16,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">5</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M627.39,392.40 L627.39,387.90 M627.39,54.01 L627.39,58.51 M640.97,392.40 L640.97,387.90 M640.97,54.01 L640.97,58.51
		M650.61,392.40 L650.61,387.90 M650.61,54.01 L650.61,58.51 M658.09,392.40 L658.09,387.90 M658.09,54.01 L658.09,58.51
		M664.20,392.40 L664.20,387.90 M664.20,54.01 L664.20,58.51 M669.36,392.40 L669.36,387.90 M669.36,54.01 L669.36,58.51
		M673.83,392.40 L673.83,387.90 M673.83,54.01 L673.83,58.51 M677.78,392.40 L677.78,387.90 M677.78,54.01 L677.78,58.51
		M681.31,392.40 L681.31,383.40 M681.31,54.01 L681.31,63.01  '/>	<g transform="translate(681.31,414.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">6</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,54.01 L64.14,392.40 L681.31,392.40 L681.31,54.01 L64.14,54.01 Z  '/></g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<g transform="translate(19.18,223.21) rotate(270)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >frequency</tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<g transform="translate(689.71,223.21) rotate(270)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<g transform="translate(372.72,441.30)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >integrand</tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<g transform="translate(372.72,57.91)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
</g>
	<g id="gnuplot_plot_1" ><title>103</title>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<g id="gnuplot_plot_1_keyentry" visibility="visible" onclick="gnuplot_svg.toggleVisibility(evt,'gnuplot_plot_1')">
	<g transform="translate(766.43,209.11)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="start">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">3</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='rgb(148,   0, 211)'  d='M715.48,205.21 L758.04,205.21  '/>	</g>
	<path stroke='rgb(148,   0, 211)'  d='M143.22,318.37 L143.22,291.37 L167.84,291.37 L167.84,291.72 L181.88,291.72 L181.88,300.40 L191.74,300.40 L191.74,298.88
		L199.35,298.88 L199.35,304.44 L205.55,304.44 L205.55,310.69 L210.77,310.69 L210.77,300.40 L215.30,300.40 L215.30,317.17
		L219.28,317.17 L219.28,308.65 L222.84,308.65 L222.84,348.74 L226.06,348.74 L226.06,312.48 L228.99,312.48 L228.99,332.92
		L231.69,332.92 L231.69,346.27 L234.19,346.27 L234.19,340.23 L236.51,340.23 L236.51,369.34 L238.69,369.34 L238.69,338.55
		L240.73,338.55 L240.73,340.23 L242.65,340.23 L242.65,344.06 L244.47,344.06 L246.19,344.06 L247.84,344.06 L247.84,392.40
		L249.40,392.40 L249.40,369.34 L250.89,369.34 L250.89,363.30 L252.32,363.30 L252.32,351.55 L253.70,351.55 L253.70,332.92
		L255.02,332.92 L255.02,369.34 L256.28,369.34 L256.28,344.06 L257.51,344.06 L257.51,377.85 L258.68,377.85 L258.68,348.74
		L259.82,348.74 L259.82,369.34 L260.92,369.34 L260.92,377.85 L261.99,377.85 L261.99,358.61 L263.02,358.61 L263.02,377.85
		L264.03,377.85 L264.03,358.61 L265.00,358.61 L265.00,392.40 L265.95,392.40 L265.95,358.61 L266.87,358.61 L266.87,392.40
		L267.76,392.40 L267.76,351.55 L268.63,351.55 L268.63,363.30 L269.48,363.30 L269.48,392.40 L270.31,392.40 L271.12,392.40
		L271.12,363.30 L271.91,363.30 L271.91,392.40 L272.68,392.40 L272.68,369.34 L273.44,369.34 L273.44,392.40 L274.17,392.40
		L274.17,348.74 L274.90,348.74 L274.90,377.85 L275.60,377.85 L275.60,392.40 L276.30,392.40 L276.30,369.34 L276.97,369.34
		L276.97,392.40 L277.64,392.40 L278.29,392.40 L278.93,392.40 L279.56,392.40 L280.17,392.40 L280.78,392.40 L281.37,392.40
		L281.95,392.40 L282.53,392.40 L283.09,392.40 L283.64,392.40 L283.64,377.85 L284.19,377.85 L284.19,392.40 L284.73,392.40
		L285.26,392.40 L285.78,392.40 L286.29,392.40 L286.29,377.85 L286.79,377.85 L286.79,392.40 L287.29,392.40 L287.78,392.40
		L288.26,392.40 L288.74,392.40 L288.74,377.85 L289.21,377.85 L289.21,392.40 L289.67,392.40 L289.67,369.34 L290.13,369.34
		L290.13,392.40 L290.58,392.40 L291.02,392.40 L291.46,392.40 L291.89,392.40 L292.32,392.40 L292.74,392.40 L293.16,392.40
		L293.57,392.40 L293.97,392.40 L294.38,392.40 L294.77,392.40 L295.17,392.40 L295.55,392.40 L295.94,392.40 L296.32,392.40
		L296.69,392.40 L297.06,392.40 L297.43,392.40 L297.79,392.40 L298.15,392.40 L298.50,392.40 L298.85,392.40 L299.20,392.40
		L299.55,392.40 L299.89,392.40 L299.89,369.34 L300.22,369.34 L300.22,392.40  '/></g>
	</g>
	<g id="gnuplot_plot_2" ><title>105</title>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<g id="gnuplot_plot_2_keyentry" visibility="visible" onclick="gnuplot_svg.toggleVisibility(evt,'gnuplot_plot_2')">
	<g transform="translate(766.43,227.11)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="start">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">5</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='rgb(  0, 158, 115)'  d='M715.48,223.21 L758.04,223.21  '/>	</g>
	<path stroke='rgb(  0, 158, 115)'  d='M166.04,191.24 L166.04,172.30 L201.79,172.30 L201.79,185.01 L218.69,185.01 L218.69,197.86 L229.87,197.86 L229.87,208.99
		L238.23,208.99 L238.23,219.68 L244.92,219.68 L244.92,228.37 L250.50,228.37 L250.50,235.53 L255.28,235.53 L255.28,243.08
		L259.46,243.08 L259.46,249.56 L263.17,249.56 L263.17,252.24 L266.52,252.24 L266.52,261.06 L269.56,261.06 L269.56,267.20
		L272.35,267.20 L272.35,271.69 L274.92,271.69 L274.92,277.69 L277.31,277.69 L277.31,284.21 L279.54,284.21 L279.54,286.79
		L281.63,286.79 L281.63,297.70 L283.60,297.70 L283.60,298.40 L285.46,298.40 L285.46,298.64 L287.22,298.64 L287.22,301.20
		L288.90,301.20 L288.90,307.89 L290.49,307.89 L290.49,312.95 L292.01,312.95 L292.01,313.44 L293.47,313.44 L293.47,313.93
		L294.86,313.93 L294.86,332.92 L296.20,332.92 L296.20,322.44 L297.49,322.44 L297.49,317.76 L298.73,317.76 L298.73,336.99
		L299.92,336.99 L299.92,329.51 L301.08,329.51 L301.08,327.51 L302.19,327.51 L302.19,335.55 L303.27,335.55 L303.27,328.48
		L304.32,328.48 L304.32,336.99 L305.33,336.99 L305.33,335.55 L306.32,335.55 L306.32,363.30 L307.28,363.30 L307.28,342.06
		L308.21,342.06 L308.21,358.61 L309.11,358.61 L309.11,369.34 L309.99,369.34 L309.99,354.78 L310.85,354.78 L310.85,392.40
		L311.69,392.40 L311.69,354.78 L312.50,354.78 L312.50,377.85 L313.30,377.85 L313.30,392.40 L314.08,392.40 L314.84,392.40
		L315.59,392.40 L315.59,377.85 L316.31,377.85 L316.31,392.40 L317.03,392.40 L317.72,392.40 L318.41,392.40 L318.41,369.34
		L319.08,369.34 L319.08,392.40 L319.73,392.40 L320.38,392.40 L321.01,392.40 L321.63,392.40 L322.24,392.40 L322.84,392.40
		L323.42,392.40 L324.00,392.40 L324.57,392.40 L325.13,392.40 L325.68,392.40 L326.22,392.40 L326.75,392.40 L327.27,392.40
		L327.79,392.40 L328.29,392.40 L328.79,392.40 L329.29,392.40 L329.77,392.40 L330.25,392.40 L330.25,377.85 L330.72,377.85
		L330.72,392.40 L331.19,392.40 L331.65,392.40 L331.65,369.34 L332.10,369.34 L332.10,392.40 L332.55,392.40 L332.55,377.85
		L332.99,377.85 L332.99,392.40 L333.42,392.40 L333.85,392.40 L334.27,392.40 L334.69,392.40 L335.11,392.40 L335.52,392.40
		L335.92,392.40 L336.32,392.40 L336.71,392.40 L337.10,392.40 L337.49,392.40 L337.87,392.40 L338.24,392.40 L338.62,392.40
		L338.98,392.40 L339.35,392.40 L339.71,392.40 L340.06,392.40 L340.42,392.40 L340.42,377.85 L340.77,377.85 L340.77,392.40
		L341.11,392.40 L341.45,392.40 L341.79,392.40  '/></g>
	</g>
	<g id="gnuplot_plot_3" ><title>107</title>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<g id="gnuplot_plot_3_keyentry" visibility="visible" onclick="gnuplot_svg.toggleVisibility(evt,'gnuplot_plot_3')">
	<g transform="translate(766.43,245.11)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="start">
		<text><tspan font-family="Arial" >10</tspan><tspan font-family="Arial"  font-size="9.6" dy="-6.00px">7</tspan><tspan font-size="12.0" dy="6.00"></tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='rgb( 86, 180, 233)'  d='M715.48,241.21 L758.04,241.21  '/>	</g>
	<path stroke='rgb( 86, 180, 233)'  d='M191.57,74.25 L191.57,73.00 L228.22,73.00 L228.22,98.98 L245.30,98.98 L245.30,118.71 L256.56,118.71 L256.56,134.96
		L264.97,134.96 L264.97,148.38 L271.69,148.38 L271.69,160.29 L277.28,160.29 L277.28,170.56 L282.08,170.56 L282.08,180.93
		L286.27,180.93 L286.27,189.82 L289.99,189.82 L289.99,197.61 L293.35,197.61 L293.35,205.19 L296.39,205.19 L296.39,212.34
		L299.18,212.34 L299.18,217.67 L301.76,217.67 L301.76,224.37 L304.16,224.37 L304.16,231.47 L306.39,231.47 L306.39,236.94
		L308.48,236.94 L308.48,239.87 L310.46,239.87 L310.46,246.82 L312.32,246.82 L312.32,251.04 L314.08,251.04 L314.08,256.04
		L315.76,256.04 L315.76,262.10 L317.35,262.10 L317.35,261.76 L318.87,261.76 L318.87,274.25 L320.33,274.25 L320.33,272.10
		L321.73,272.10 L321.73,275.42 L323.07,275.42 L323.07,283.61 L324.36,283.61 L324.36,280.34 L325.60,280.34 L325.60,288.65
		L326.79,288.65 L326.79,294.49 L327.95,294.49 L327.95,291.37 L329.06,291.37 L329.06,293.91 L330.15,293.91 L330.15,299.38
		L331.19,299.38 L331.19,307.52 L332.21,307.52 L333.19,307.52 L333.19,320.99 L334.15,320.99 L334.15,312.02 L335.08,312.02
		L335.99,312.02 L335.99,314.44 L336.87,314.44 L336.87,317.17 L337.73,317.17 L337.73,331.72 L338.56,331.72 L338.56,324.82
		L339.38,324.82 L339.38,325.68 L340.18,325.68 L340.96,325.68 L340.96,330.58 L341.72,330.58 L341.72,342.06 L342.46,342.06
		L342.46,344.06 L343.19,344.06 L343.19,334.19 L343.91,334.19 L343.91,346.27 L344.60,346.27 L344.60,351.55 L345.29,351.55
		L345.29,363.30 L345.96,363.30 L346.61,363.30 L347.26,363.30 L347.26,346.27 L347.89,346.27 L347.89,354.78 L348.51,354.78
		L348.51,369.34 L349.12,369.34 L349.12,348.74 L349.72,348.74 L349.72,369.34 L350.31,369.34 L350.31,392.40 L350.88,392.40
		L351.45,392.40 L351.45,369.34 L352.01,369.34 L352.01,354.78 L352.56,354.78 L352.56,392.40 L353.10,392.40 L353.63,392.40
		L353.63,358.61 L354.16,358.61 L354.16,392.40 L354.67,392.40 L355.18,392.40 L355.68,392.40 L356.17,392.40 L356.66,392.40
		L357.14,392.40 L357.14,363.30 L357.61,363.30 L357.61,392.40 L358.07,392.40 L358.53,392.40 L358.98,392.40 L358.98,377.85
		L359.43,377.85 L359.43,392.40 L359.87,392.40 L360.31,392.40 L360.74,392.40 L360.74,377.85 L361.16,377.85 L361.16,392.40
		L361.58,392.40 L361.99,392.40 L362.40,392.40 L362.81,392.40 L363.20,392.40 L363.20,377.85 L363.60,377.85 L363.60,392.40
		L363.99,392.40 L364.37,392.40 L364.75,392.40 L364.75,377.85 L365.13,377.85 L365.13,392.40 L365.50,392.40 L365.87,392.40
		L366.23,392.40 L366.59,392.40 L366.95,392.40 L367.30,392.40 L367.65,392.40 L368.00,392.40 L368.34,392.40 L368.68,392.40
		 '/></g>
	</g>
<g fill="none" color="white" stroke="rgb( 86, 180, 233)" stroke-width="2.00" stroke-linecap="butt" stroke-linejoin="miter">
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="2.00" stroke-linecap="butt" stroke-linejoin="miter">
</g>
<g fill="none" color="black" stroke="black" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<path stroke='black'  d='M64.14,54.01 L64.14,392.40 L681.31,392.40 L681.31,54.01 L64.14,54.01 Z  '/></g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
	<g transform="translate(372.72,30.91)" stroke="none" fill="black" font-family="Arial" font-size="12.00"  text-anchor="middle">
		<text><tspan font-family="Arial" >step size : 1.0</tspan></text>
	</g>
</g>
<g fill="none" color="black" stroke="currentColor" stroke-width="1.00" stroke-linecap="butt" stroke-linejoin="miter">
</g>

<script type="text/javascript"><![CDATA[
// plot boundaries and axis scaling information for mousing 
gnuplot_svg.plot_term_xmax = 800;
gnuplot_svg.plot_term_ymax = 450;
gnuplot_svg.plot_xmin = 64.1;
gnuplot_svg.plot_xmax = 681.3;
gnuplot_svg.plot_ybot = 392.4;
gnuplot_svg.plot_ytop = 54.0;
gnuplot_svg.plot_width = 617.2;
gnuplot_svg.plot_height = 338.4;
gnuplot_svg.plot_axis_xmin = 0.01;
gnuplot_svg.plot_axis_xmax = 1e+06;
gnuplot_svg.plot_axis_ymin = 1;
gnuplot_svg.plot_axis_ymax = 1e+07;
gnuplot_svg.polar_mode = false;
gnuplot_svg.plot_axis_x2min = "none";
gnuplot_svg.plot_axis_y2min = "none";
gnuplot_svg.plot_logaxis_x = 1;
gnuplot_svg.plot_logaxis_y = 1;
gnuplot_svg.plot_timeaxis_x = "";
gnuplot_svg.plot_timeaxis_y = "";
gnuplot_svg.hypertext_fontSize = 0;
gnuplot_svg.hypertext_fontName = null;
gnuplot_svg.hypertext_fontStyle = null;
gnuplot_svg.hypertext_fontWeight = null;
]]>
</script>
</g>

  <text id="coord_text" text-anchor="start" pointer-events="none"
  font-size="12" font-family="Arial"
  visibility="hidden"> </text>

  <rect id="hypertextbox" class="hypertextbox" pointer-events="none"
  fill="white" stroke="black" opacity="0.8"
  height="16" visibility="hidden" />

  <text id="hypertext" class="hypertext" pointer-events="none"
  font-size="12" font-family="Arial"
  visibility="hidden"> </text>

  <image id="hyperimage" class="hyperimage" pointer-events="none"
  fill="white" stroke="black" opacity="0.8"
  height="200" width="300" visibility="hidden" />
</svg>

